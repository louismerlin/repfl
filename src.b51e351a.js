parcelRequire=function(e){var r="function"==typeof parcelRequire&&parcelRequire,n="function"==typeof require&&require,i={};function u(e,u){if(e in i)return i[e];var t="function"==typeof parcelRequire&&parcelRequire;if(!u&&t)return t(e,!0);if(r)return r(e,!0);if(n&&"string"==typeof e)return n(e);var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}return u.register=function(e,r){i[e]=r},i=e(u),u.modules=i,u}(function (require) {function p(a){return a&&a.__esModule?{d:a.default}:{d:a}}var Q=this;var na,g,e,R,S,s,oa,k={},m=[],T=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|^--/i;function j(o,e){for(var t in e)o[t]=e[t];return o}function B(o){var e=o.parentNode;e&&e.removeChild(o)}function b(o,e,t){var $,r,n,a,l=arguments;if(e=j({},e),arguments.length>3)for(t=[t],$=3;$<arguments.length;$++)t.push(l[$]);if(null!=t&&(e.children=t),null!=o&&null!=o.defaultProps)for(r in o.defaultProps)void 0===e[r]&&(e[r]=o.defaultProps[r]);return a=e.key,null!=(n=e.ref)&&delete e.ref,null!=a&&delete e.key,f(o,e,a,n)}function f(o,e,t,$){var r={type:o,props:e,key:t,ref:$,__k:null,__p:null,__b:0,__e:null,l:null,__c:null,constructor:void 0};return g.vnode&&g.vnode(r),r}function q(o){return o.children}function x(o){if(null==o||"boolean"==typeof o)return null;if("string"==typeof o||"number"==typeof o)return f(null,o,null,null);if(null!=o.__e||null!=o.__c){var e=f(o.type,o.props,o.key,null);return e.__e=o.__e,e}return o}function w(o,e){this.props=o,this.context=e}function c(o,e){if(null==e)return o.__p?c(o.__p,o.__p.__k.indexOf(o)+1):null;for(var t;e<o.__k.length;e++)if(null!=(t=o.__k[e]))return"function"!=typeof t.type?t.__e:c(t,0);return"function"==typeof o.type?c(o):null}function u(o){var e,t;if(null!=(o=o.__p)&&null!=o.__c){for(o.__e=o.__c.base=null,e=0;e<o.__k.length;e++)if(null!=(t=o.__k[e])&&null!=t.__e){o.__e=o.__c.base=t.__e;break}return u(o)}}function r(o){!o.__d&&(o.__d=!0)&&1===e.push(o)&&(g.debounceRendering||R)(U)}function U(){var o;for(e.sort(function(o,e){return e.__v.__b-o.__v.__b});o=e.pop();)o.__d&&o.forceUpdate(!1)}function C(o,e,t,$,r,n,a,l){var p,_,u,i,s,S,c,v,f=e.__k||z(e.props.children,e.__k=[],x,!0),d=t&&t.__k||m,h=d.length;if(l==k)if(l=null,null!=n)l=n[0];else for(_=0;!l&&_<h;_++)l=d[_]&&d[_].__e;for(_=0;_<f.length;_++)if(null!=(p=f[_]=x(f[_]))){if(p.__p=e,p.__b=e.__b+1,null===(i=d[_])||i&&p.key==i.key&&p.type===i.type)d[_]=void 0;else for(u=0;u<h;u++){if((i=d[u])&&p.key==i.key&&p.type===i.type){d[u]=void 0;break}i=null}if(s=A(o,p,i=i||k,$,r,n,a,null,l),(u=p.ref)&&i.ref!=u&&(v||(v=[])).push(u,p.__c||s),null!=s){if(null==c&&(c=s),null!=p.l)s=p.l,p.l=null;else if(n==i||s!=l||null==s.parentNode)o:if(null==l||l.parentNode!==o)o.appendChild(s);else{for(S=l,u=0;(S=S.nextSibling)&&u<h;u+=2)if(S==s)break o;o.insertBefore(s,l)}l=s.nextSibling,"function"==typeof e.type&&(e.l=s)}}if(e.__e=c,null!=n&&"function"!=typeof e.type)for(_=n.length;_--;)null!=n[_]&&B(n[_]);for(_=h;_--;)null!=d[_]&&G(d[_],e);if(v)for(_=0;_<v.length;_++)F(v[_],v[++_],e)}function z(o,e,t,$){if(null==e&&(e=[]),null==o||"boolean"==typeof o)$&&e.push(null);else if(Array.isArray(o))for(var r=0;r<o.length;r++)z(o[r],e,t,$);else e.push(t?t(o):o);return e}function V(o,e,t,$){var r,n,a=Object.keys(e).sort();for(r=0;r<a.length;r++)"children"===(n=a[r])||"key"===n||t&&("value"===n||"checked"===n?o:t)[n]===e[n]||v(o,n,e[n],t[n],$);for(r in t)"children"===r||"key"===r||r in e||v(o,r,null,t[r],$)}function v(o,e,t,$,r){var n,a,l,p;if("style"===(e=r?"className"===e?"class":e:"class"===e?"className":e))for(a in n=j(j({},$),t))(t||k)[a]!==($||k)[a]&&o.style.setProperty("-"===a[0]&&"-"===a[1]?a:a.replace(S,"-$&"),t&&a in t?"number"==typeof n[a]&&!1===T.test(a)?n[a]+"px":n[a]:"");else if("o"===e[0]&&"n"===e[1])l=e!==(e=e.replace(/Capture$/,"")),p=e.toLowerCase(),e=(p in o?p:e).slice(2),t?($||o.addEventListener(e,D,l),(o.u||(o.u={}))[e]=t):o.removeEventListener(e,D,l);else if("list"!==e&&"tagName"!==e&&!r&&e in o){if(o.length&&"value"==e)for(e=o.length;e--;)o.options[e].selected=o.options[e].value==t;else o[e]=null==t?"":t;}else"function"!=typeof t&&"dangerouslySetInnerHTML"!==e&&(e!==(e=e.replace(/^xlink:?/,""))?null==t||!1===t?o.removeAttributeNS(s,e.toLowerCase()):o.setAttributeNS(s,e.toLowerCase(),t):null==t||!1===t?o.removeAttribute(e):o.setAttribute(e,t))}function D(o){return this.u[o.type](g.event?g.event(o):o)}function A(o,e,t,$,r,n,a,l,p){var _,u,i,s,S,c,v,f,d,h,m=e.type;if(void 0!==e.constructor)return null;(_=g.__b)&&_(e);try{o:if("function"==typeof m){if(f=e.props,d=(_=m.contextType)&&$[_.__c],h=_?d?d.props.value:_.__p:$,t.__c?v=(u=e.__c=t.__c).__p=u.__E:(m.prototype&&m.prototype.render?e.__c=u=new m(f,h):(e.__c=u=new w(f,h),u.constructor=m,u.render=X),d&&d.sub(u),u.props=f,u.state||(u.state={}),u.context=h,u.__n=$,i=u.__d=!0,u.__h=[]),null==u.__s&&(u.__s=u.state),null!=m.getDerivedStateFromProps&&j(u.__s==u.state?u.__s=j({},u.__s):u.__s,m.getDerivedStateFromProps(f,u.__s)),i)null==m.getDerivedStateFromProps&&null!=u.componentWillMount&&u.componentWillMount(),null!=u.componentDidMount&&a.push(u);else{if(null==m.getDerivedStateFromProps&&null==l&&null!=u.componentWillReceiveProps&&u.componentWillReceiveProps(f,h),!l&&null!=u.shouldComponentUpdate&&!1===u.shouldComponentUpdate(f,u.__s,h)){u.props=f,u.state=u.__s,u.__d=!1,u.__v=e,e.__e=t.__e,e.__k=t.__k;break o}null!=u.componentWillUpdate&&u.componentWillUpdate(f,u.__s,h)}s=u.props,S=u.state,u.context=h,u.props=f,u.state=u.__s,(_=g.__r)&&_(e),u.__d=!1,u.__v=e,u.__P=o;try{z(null!=(_=u.render(u.props,u.state,u.context))&&_.type==q&&null==_.key?_.props.children:_,e.__k=[],x,!0)}catch(o){if((_=g.__E)&&_(o,e,t))break o;throw o}for(null!=u.getChildContext&&($=j(j({},$),u.getChildContext())),i||null==u.getSnapshotBeforeUpdate||(c=u.getSnapshotBeforeUpdate(s,S)),C(o,e,t,$,r,n,a,p),u.base=e.__e;_=u.__h.pop();)_.call(u);i||null==s||null==u.componentDidUpdate||u.componentDidUpdate(s,S,c),v&&(u.__E=u.__p=null)}else e.__e=W(t.__e,e,t,$,r,n,a);(_=g.diffed)&&_(e)}catch(x){y(x,e.__p)}return e.__e}function E(o,e){for(var t;t=o.pop();)try{t.componentDidMount()}catch($){y($,t.__v.__p)}g.__c&&g.__c(e)}function W(o,e,t,$,r,n,a){var l,p,_,u,i=t.props,s=e.props;if(r="svg"===e.type||r,null==o&&null!=n)for(l=0;l<n.length;l++)if(null!=(p=n[l])&&(null===e.type?3===p.nodeType:p.localName===e.type)){o=p,n[l]=null;break}if(null==o){if(null===e.type)return document.createTextNode(s);o=r?document.createElementNS("http://www.w3.org/2000/svg",e.type):document.createElement(e.type),n=null}return null===e.type?i!==s&&(o.data=s):e!==t&&(null!=n&&(n=m.slice.call(o.childNodes)),_=(i=t.props||k).dangerouslySetInnerHTML,((u=s.dangerouslySetInnerHTML)||_)&&null==n&&(u&&_&&u.__html==_.__html||(o.innerHTML=u&&u.__html||"")),s.multiple&&(o.multiple=s.multiple),C(o,e,t,$,"foreignObject"!==e.type&&r,n,a,k),V(o,s,i,r)),o}function F(o,e,t){try{"function"==typeof o?o(e):o.current=e}catch(o){y(o,t)}}function G(o,e,t){var $,r,n;if(g.unmount&&g.unmount(o),($=o.ref)&&F($,null,e),t||"function"==typeof o.type||(t=null!=(r=o.__e)),o.__e=o.l=null,null!=($=o.__c)){if($.componentWillUnmount)try{$.componentWillUnmount()}catch(a){y(a,e)}$.base=$.__P=null}if($=o.__k)for(n=0;n<$.length;n++)$[n]&&G($[n],e,t);null!=r&&B(r)}function X(o,e,t){return this.constructor(o,t)}function y(o,e){var t;for(g.__e&&g.__e(o,e);e;e=e.__p)if((t=e.__c)&&!t.__p)try{if(t.constructor&&null!=t.constructor.getDerivedStateFromError)t.setState(t.constructor.getDerivedStateFromError(o));else{if(null==t.componentDidCatch)continue;t.componentDidCatch(o)}return r(t.__E=t)}catch($){o=$}throw o}function Y(o,e,t){var $,r;g.__p&&g.__p(o,e),$=e.__k,o=b(q,null,[o]),r=[],A(e,t?o:e.__k=o,$||k,k,void 0!==e.ownerSVGElement,t?[t]:$?null:m.slice.call(e.childNodes),r,!1,t||k),E(r,o)}na=g={},w.prototype.setState=function(o,e){var t=this.__s!==this.state&&this.__s||(this.__s=j({},this.state));("function"!=typeof o||(o=o(t,this.props)))&&j(t,o),null!=o&&this.__v&&(e&&this.__h.push(e),r(this))},w.prototype.forceUpdate=function(o){var e,t,$,r=this.__v,n=this.__v.__e,a=this.__P;a&&(e=!1!==o,t=[],$=A(a,r,j({},r),this.__n,void 0!==a.ownerSVGElement,null,t,e,null==n?c(r):n),E(t,r),$!=n&&u(r)),o&&o()},w.prototype.render=q,e=[],R="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,S=/[A-Z]/g,s="http://www.w3.org/1999/xlink",oa=0;var o,a,t=[],H=g.__r;g.__r=function($){H&&H($),o=0,(a=$.__c).__H&&(a.__H.t=i(a.__H.t))};var I=g.diffed;g.diffed=function($){I&&I($);var r=$.__c;if(r){var e=r.__H;e&&(e.u=i(e.u))}};var J=g.unmount;function K($){g.__h&&g.__h(a);var r=a.__H||(a.__H={i:[],t:[],u:[]});return $>=r.i.length&&r.i.push({}),r.i[$]}function h($){return Z(M,$)}function Z($,r,e){var t=K(o++);return t.__c||(t.__c=a,t.o=[e?e(r):M(null,r),function(r){var e=$(t.o[0],r);t.o[0]!==e&&(t.o[0]=e,t.__c.setState({}))}]),t.o}function _($,r){var e=K(o++);ea(e.v,r)&&(e.o=$,e.v=r,a.__H.t.push(e),aa(a))}g.unmount=function($){J&&J($);var r=$.__c;if(r){var e=r.__H;e&&e.i.forEach(function($){return $.l&&$.l()})}};var aa=function(){};function L(){t.some(function($){$.m=!1,$.__P&&($.__H.t=i($.__H.t))}),t=[]}function ba(){setTimeout(L)}function i($){return $.forEach(ca),$.forEach(da),[]}function ca($){$.l&&$.l()}function da($){var r=$.o();"function"==typeof r&&($.l=r)}function ea($,r){return!$||r.some(function(r,e){return r!==$[e]})}function M($,r){return"function"==typeof r?r($):r}"undefined"!=typeof window&&(aa=function($){!$.m&&($.m=!0)&&1===t.push($)&&(g.requestAnimationFrame?g.requestAnimationFrame(L):requestAnimationFrame(ba))});var fa={};const l=Q.XMLHttpRequest;function $(e,t){return new Promise(function(o,r){const n=t&&t.method||"GET",s=t&&t.data||null,a=t&&t.json||!1;e||r(new Error("No url was given")),"GET"!==n&&"POST"!==n&&(console.log("GET"!==n),r(new Error("Method must be GET or POST")));const $=new l;$.open(n,e,!0),"POST"===n&&("object"==typeof s||a?$.setRequestHeader("Content-Type","application/json; charset=UTF-8"):$.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8")),$.onload=function(){$.status>=200&&$.status<400?o($.responseText):r(new Error(l.statusText))},$.onerror=function(){r(new Error(l.statusText))},$.send(s)})}fa=$;const d=new Date,ga="https://cors.louismerl.in",N="https://ewa.epfl.ch/room/Default.aspx?room=",O=new Intl.DateTimeFormat("ch-fr",{hour:"2-digit",minute:"2-digit"}).format,ha=new Date(d.getTime()+864e5),ia=36e5,ja=96e4;function ka({name:e,loaded:$}){const[t,r]=h({isLoading:!0,freeUntil:null,occupiedUntil:null});_(()=>{!async function(){var $co89$$interop$default=p(fa);const t=await $co89$$interop$default.d(`${ga}/${N}${e}`);$();const a=t.split("\n").find(e=>e.includes("v.events")).replace("v.events = ","").replace(/;/g,"").replace(/\\"/g,"").replace(/<br>/g,"").replace(/ISA - /g,"").replace(/\\/g,""),n=JSON.parse(a),i=n.reduce((e,{Start:$,End:t,Text:r})=>{const a=new Date($),n=new Date(t);if(e){const n=new Date(e.End);return new Date(n.getTime()+ja)>a?{Start:$,End:t,Text:r}:e}if(d>a&&d<n)return{Start:$,End:t,Text:r}},null),l=n.find(({Start:e})=>{const $=new Date(e);return d<$&&$<ha}),f=!i&&l&&new Date(l.Start),o=i&&new Date(i.End),c=i&&"R\xE9servation ponctuelle"===i.Text||l&&"R\xE9servation ponctuelle"===l.Text;r({isLoading:!1,freeUntil:f,occupiedUntil:o,isReservationPonctuelle:c})}()},[]);let a="loading",n="\uD83D\uDD04";return t.isLoading||(a="",n="\uD83D\uDC4D",t.isReservationPonctuelle?(a="available for revisions",n="\uD83D\uDC69\u200D\uD83C\uDFEB"):t.freeUntil?(a=`available until ${O(t.freeUntil)}`,t.freeUntil-d<=ia&&(n="\u23F3")):t.occupiedUntil&&(a=`occupied until ${O(t.occupiedUntil)}`,n="\u26D4")),b("tr",null,b("td",null,n),b("td",null,b("strong",null,b("a",{target:"_blank",href:`${N}${e}`},e.toUpperCase()))),b("td",{class:"text-right fullwidth"},a))}var la={};la={in:["inm10","inm11","inm200","inm201","inm202","inm203","inr113","inr219","inf119","inf211","inf213","inf1","inf2","inf3","inj218"],bc:["bc01","bc02","bc03","bc04","bc05","bc010","bc129","bc229","bc329","bc410","bc420"],co:["co020","co021","co023"]};var n=p(la);const P=Object.keys(n.d);function ma(){const[o,$]=h("all");let[r,m]=h(0);const e=Object.values(n.d).reduce((o,$)=>o+$.length,0),c=()=>{m(r+=1)},t=r===e?{opacity:0}:{};return b("main",{class:"container"},b("header",{class:"header"},b("h1",{class:"less-margin title"},"rEPFL"),b("h3",{class:"less-margin"},"find a free room @ EPFL")),b("progress",{class:"rooms-progress",value:r||"0",max:e,style:t},r,"/",e),b("p",{class:"button-list"},["all"].concat(P).map(r=>b(q,null,b("button",{onClick:()=>$(r),class:o===r?"filled":""},r.toUpperCase())," "))),P.map($=>b("div",{class:"all"!==o&&o!==$&&"hidden"},b("h2",{class:"text-center table-h2"},$.toUpperCase()),b("hr",{class:"table-hr"}),b("table",null,b("tbody",null,n.d[$].map(o=>b(ka,{key:o,name:o,loaded:c})))))),b("footer",{class:"footer"},b("hr",null),b("h5",{class:"less-margin"},"made with \u2764\uFE0F by ",b("a",{href:"https://louismerl.in"},"Louis Merlin")),b("h5",{class:"less-margin"},"using ",b("a",{href:"https://preactjs.com"},"preact")," and ",b("a",{href:"https://concrete.style"},"concrete.css")),b("h5",{class:"less-margin"},"need more rooms ? ",b("a",{href:"https://github.com/louismerlin/repfl/blob/master/src/rooms.json"},"add them")," or ",b("a",{href:"mailto:louis.merlin@epfl.ch"},"email me")),b("h5",{class:"less-margin"},"don't hesitate to ",b("a",{href:"https://github.com/louismerlin/repfl"},"star and/or contribute"))))}Y(b(ma,null),document.body);return{"Focm":{}};});