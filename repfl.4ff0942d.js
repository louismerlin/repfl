!function(){var e,n,t,r,o,l={},i=[],u=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord/i;function c(e,n){for(var t in n)e[t]=n[t];return e}function a(e){var n=e.parentNode;n&&n.removeChild(e)}function _(e,n,t){var r,o,l,i,u=arguments;if(n=c({},n),arguments.length>3)for(t=[t],r=3;r<arguments.length;r++)t.push(u[r]);if(null!=t&&(n.children=t),null!=e&&null!=e.defaultProps)for(o in e.defaultProps)void 0===n[o]&&(n[o]=e.defaultProps[o]);return i=n.key,null!=(l=n.ref)&&delete n.ref,null!=i&&delete n.key,s(e,n,i,l)}function s(n,t,r,o){var l={type:n,props:t,key:r,ref:o,__k:null,__:null,__b:0,__e:null,__d:null,__c:null,constructor:void 0};return e.vnode&&e.vnode(l),l}function f(e){return e.children}function p(e,n){this.props=e,this.context=n}function d(e,n){if(null==n)return e.__?d(e.__,e.__.__k.indexOf(e)+1):null;for(var t;n<e.__k.length;n++)if(null!=(t=e.__k[n])&&null!=t.__e)return t.__e;return"function"==typeof e.type?d(e):null}function h(e){var n,t;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,n=0;n<e.__k.length;n++)if(null!=(t=e.__k[n])&&null!=t.__e){e.__e=e.__c.base=t.__e;break}return h(e)}}function m(o){(!o.__d&&(o.__d=!0)&&1===n.push(o)||r!==e.debounceRendering)&&((r=e.debounceRendering)||t)(v)}function v(){var e,t,r,o,l,i,u;for(n.sort((function(e,n){return n.__v.__b-e.__v.__b}));e=n.pop();)e.__d&&(r=void 0,o=void 0,i=(l=(t=e).__v).__e,(u=t.__P)&&(r=[],o=x(u,l,c({},l),t.__n,void 0!==u.ownerSVGElement,null,r,null==i?d(l):i),S(r,l),o!=i&&h(l)))}function y(e,n,t,r,o,u,c,_,s){var f,p,h,m,v,y,b,k=t&&t.__k||i,w=k.length;if(_==l&&(_=null!=u?u[0]:w?d(t,0):null),f=0,n.__k=g(n.__k,(function(t){if(null!=t){if(t.__=n,t.__b=n.__b+1,null===(h=k[f])||h&&t.key==h.key&&t.type===h.type)k[f]=void 0;else for(p=0;p<w;p++){if((h=k[p])&&t.key==h.key&&t.type===h.type){k[p]=void 0;break}h=null}if(m=x(e,t,h=h||l,r,o,u,c,_,s),(p=t.ref)&&h.ref!=p&&(b||(b=[]),h.ref&&b.push(h.ref,null,t),b.push(p,t.__c||m,t)),null!=m){if(null==y&&(y=m),null!=t.__d)m=t.__d,t.__d=null;else if(u==h||m!=_||null==m.parentNode){e:if(null==_||_.parentNode!==e)e.appendChild(m);else{for(v=_,p=0;(v=v.nextSibling)&&p<w;p+=2)if(v==m)break e;e.insertBefore(m,_)}"option"==n.type&&(e.value="")}_=m.nextSibling,"function"==typeof n.type&&(n.__d=m)}}return f++,t})),n.__e=y,null!=u&&"function"!=typeof n.type)for(f=u.length;f--;)null!=u[f]&&a(u[f]);for(f=w;f--;)null!=k[f]&&C(k[f],k[f]);if(b)for(f=0;f<b.length;f++)E(b[f],b[++f],b[++f])}function g(e,n,t){if(null==t&&(t=[]),null==e||"boolean"==typeof e)n&&t.push(n(null));else if(Array.isArray(e))for(var r=0;r<e.length;r++)g(e[r],n,t);else t.push(n?n("string"==typeof e||"number"==typeof e?s(null,e,null,null):null!=e.__e||null!=e.__c?s(e.type,e.props,e.key,null):e):e);return t}function b(e,n,t){"-"===n[0]?e.setProperty(n,t):e[n]="number"==typeof t&&!1===u.test(n)?t+"px":null==t?"":t}function k(e,n,t,r,o){var l,i,u,c,a;if(o?"className"===n&&(n="class"):"class"===n&&(n="className"),"key"===n||"children"===n);else if("style"===n)if(l=e.style,"string"==typeof t)l.cssText=t;else{if("string"==typeof r&&(l.cssText="",r=null),r)for(i in r)t&&i in t||b(l,i,"");if(t)for(u in t)r&&t[u]===r[u]||b(l,u,t[u])}else"o"===n[0]&&"n"===n[1]?(c=n!==(n=n.replace(/Capture$/,"")),a=n.toLowerCase(),n=(a in e?a:n).slice(2),t?(r||e.addEventListener(n,w,c),(e.l||(e.l={}))[n]=t):e.removeEventListener(n,w,c)):"list"!==n&&"tagName"!==n&&"form"!==n&&!o&&n in e?e[n]=null==t?"":t:"function"!=typeof t&&"dangerouslySetInnerHTML"!==n&&(n!==(n=n.replace(/^xlink:?/,""))?null==t||!1===t?e.removeAttributeNS("http://www.w3.org/1999/xlink",n.toLowerCase()):e.setAttributeNS("http://www.w3.org/1999/xlink",n.toLowerCase(),t):null==t||!1===t?e.removeAttribute(n):e.setAttribute(n,t))}function w(n){this.l[n.type](e.event?e.event(n):n)}function x(n,t,r,o,l,i,u,a,_){var s,d,h,m,v,b,k,w,x,S,E=t.type;if(void 0!==t.constructor)return null;(s=e.__b)&&s(t);try{e:if("function"==typeof E){if(w=t.props,x=(s=E.contextType)&&o[s.__c],S=s?x?x.props.value:s.__:o,r.__c?k=(d=t.__c=r.__c).__=d.__E:("prototype"in E&&E.prototype.render?t.__c=d=new E(w,S):(t.__c=d=new p(w,S),d.constructor=E,d.render=P),x&&x.sub(d),d.props=w,d.state||(d.state={}),d.context=S,d.__n=o,h=d.__d=!0,d.__h=[]),null==d.__s&&(d.__s=d.state),null!=E.getDerivedStateFromProps&&(d.__s==d.state&&(d.__s=c({},d.__s)),c(d.__s,E.getDerivedStateFromProps(w,d.__s))),m=d.props,v=d.state,h)null==E.getDerivedStateFromProps&&null!=d.componentWillMount&&d.componentWillMount(),null!=d.componentDidMount&&d.__h.push(d.componentDidMount);else{if(null==E.getDerivedStateFromProps&&null==d.__e&&null!=d.componentWillReceiveProps&&d.componentWillReceiveProps(w,S),!d.__e&&null!=d.shouldComponentUpdate&&!1===d.shouldComponentUpdate(w,d.__s,S)){for(d.props=w,d.state=d.__s,d.__d=!1,d.__v=t,t.__e=r.__e,t.__k=r.__k,d.__h.length&&u.push(d),s=0;s<t.__k.length;s++)t.__k[s]&&(t.__k[s].__=t);break e}null!=d.componentWillUpdate&&d.componentWillUpdate(w,d.__s,S),null!=d.componentDidUpdate&&d.__h.push((function(){d.componentDidUpdate(m,v,b)}))}d.context=S,d.props=w,d.state=d.__s,(s=e.__r)&&s(t),d.__d=!1,d.__v=t,d.__P=n,s=d.render(d.props,d.state,d.context),t.__k=g(null!=s&&s.type==f&&null==s.key?s.props.children:s),null!=d.getChildContext&&(o=c(c({},o),d.getChildContext())),h||null==d.getSnapshotBeforeUpdate||(b=d.getSnapshotBeforeUpdate(m,v)),y(n,t,r,o,l,i,u,a,_),d.base=t.__e,d.__h.length&&u.push(d),k&&(d.__E=d.__=null),d.__e=null}else t.__e=T(r.__e,t,r,o,l,i,u,_);(s=e.diffed)&&s(t)}catch(n){e.__e(n,t,r)}return t.__e}function S(n,t){e.__c&&e.__c(t,n),n.some((function(t){try{n=t.__h,t.__h=[],n.some((function(e){e.call(t)}))}catch(n){e.__e(n,t.__v)}}))}function T(e,n,t,r,o,u,c,a){var _,s,f,p,d,h=t.props,m=n.props;if(o="svg"===n.type||o,null==e&&null!=u)for(_=0;_<u.length;_++)if(null!=(s=u[_])&&(null===n.type?3===s.nodeType:s.localName===n.type)){e=s,u[_]=null;break}if(null==e){if(null===n.type)return document.createTextNode(m);e=o?document.createElementNS("http://www.w3.org/2000/svg",n.type):document.createElement(n.type),u=null}if(null===n.type)null!=u&&(u[u.indexOf(e)]=null),h!==m&&(e.data=m);else if(n!==t){if(null!=u&&(u=i.slice.call(e.childNodes)),f=(h=t.props||l).dangerouslySetInnerHTML,p=m.dangerouslySetInnerHTML,!a){if(h===l)for(h={},d=0;d<e.attributes.length;d++)h[e.attributes[d].name]=e.attributes[d].value;(p||f)&&(p&&f&&p.__html==f.__html||(e.innerHTML=p&&p.__html||""))}(function(e,n,t,r,o){var l;for(l in t)l in n||k(e,l,null,t[l],r);for(l in n)o&&"function"!=typeof n[l]||"value"===l||"checked"===l||t[l]===n[l]||k(e,l,n[l],t[l],r)})(e,m,h,o,a),n.__k=n.props.children,p||y(e,n,t,r,"foreignObject"!==n.type&&o,u,c,l,a),a||("value"in m&&void 0!==m.value&&m.value!==e.value&&(e.value=null==m.value?"":m.value),"checked"in m&&void 0!==m.checked&&m.checked!==e.checked&&(e.checked=m.checked))}return e}function E(n,t,r){try{"function"==typeof n?n(t):n.current=t}catch(n){e.__e(n,r)}}function C(n,t,r){var o,l,i;if(e.unmount&&e.unmount(n),(o=n.ref)&&E(o,null,t),r||"function"==typeof n.type||(r=null!=(l=n.__e)),n.__e=n.__d=null,null!=(o=n.__c)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(n){e.__e(n,t)}o.base=o.__P=null}if(o=n.__k)for(i=0;i<o.length;i++)o[i]&&C(o[i],t,r);null!=l&&a(l)}function P(e,n,t){return this.constructor(e,t)}e={__e:function(e,n){for(var t;n=n.__;)if((t=n.__c)&&!t.__)try{if(t.constructor&&null!=t.constructor.getDerivedStateFromError)t.setState(t.constructor.getDerivedStateFromError(e));else{if(null==t.componentDidCatch)continue;t.componentDidCatch(e)}return m(t.__E=t)}catch(n){e=n}throw e}},p.prototype.setState=function(e,n){var t;t=this.__s!==this.state?this.__s:this.__s=c({},this.state),"function"==typeof e&&(e=e(t,this.props)),e&&c(t,e),null!=e&&this.__v&&(this.__e=!1,n&&this.__h.push(n),m(this))},p.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),m(this))},p.prototype.render=f,n=[],t="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,o=l;var U,H,D,A=[],L=e.__r,N=e.diffed,j=e.__c,R=e.unmount;function F(n){e.__h&&e.__h(H);var t=H.__H||(H.__H={t:[],u:[]});return n>=t.t.length&&t.t.push({}),t.t[n]}function O(e){return function(e,n,t){var r=F(U++);return r.__c||(r.__c=H,r.i=[t?t(n):I(void 0,n),function(n){var t=e(r.i[0],n);r.i[0]!==t&&(r.i[0]=t,r.__c.setState({}))}]),r.i}(I,e)}function M(){A.some((function(e){e.__P&&(e.__H.u.forEach(q),e.__H.u.forEach(W),e.__H.u=[])})),A=[]}function q(e){e.m&&e.m()}function W(e){var n=e.i();"function"==typeof n&&(e.m=n)}function I(e,n){return"function"==typeof n?n(e):n}function B(e,n){return new Error(e+" "+n.status+" "+n.responseText)}e.__r=function(e){L&&L(e),U=0,(H=e.__c).__H&&(H.__H.u.forEach(q),H.__H.u.forEach(W),H.__H.u=[])},e.diffed=function(n){N&&N(n);var t=n.__c;if(t){var r=t.__H;r&&r.u.length&&(1!==A.push(t)&&D===e.requestAnimationFrame||((D=e.requestAnimationFrame)||function(e){var n,t=function(){clearTimeout(r),cancelAnimationFrame(n),setTimeout(e)},r=setTimeout(t,100);"undefined"!=typeof window&&(n=requestAnimationFrame(t))})(M))}},e.__c=function(e,n){n.some((function(e){e.__h.forEach(q),e.__h=e.__h.filter((function(e){return!e.i||W(e)}))})),j&&j(e,n)},e.unmount=function(e){R&&R(e);var n=e.__c;if(n){var t=n.__H;t&&t.t.forEach((function(e){return e.m&&e.m()}))}};var G=function(e,n){return new Promise((function(t,r){var o=n&&n.method||"GET",l=n&&n.body||null,i=n&&n.type||null,u=n&&n.headers||{};e||r(new Error("No url was given"));var c=new XMLHttpRequest;c.open(o,e,!0),l instanceof FormData||"form-data"===i?c.setRequestHeader("Content-Type","multipart/form-data"):null!==l&&"object"==typeof l||"json"===i?("object"==typeof l&&(l=JSON.stringify(l)),c.setRequestHeader("Content-Type","application/json")):c.setRequestHeader("Content-Type",i||"application/x-www-form-urlencoded"),Object.keys(u).forEach((function(e){c.setRequestHeader(e,u[e])})),c.onload=function(){if(c.status>=200&&c.status<400)try{var e=JSON.parse(c.responseText);t(e)}catch(e){t(c.responseText)}else r(B("Server returned:",c))},c.onerror=function(){r(B("Connection error:",c))},c.send(l)}))};function J(e,n,t,r,o,l,i){try{var u=e[l](i),c=u.value}catch(e){return void t(e)}u.done?n(c):Promise.resolve(c).then(r,o)}function z(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var t=[],r=!0,o=!1,l=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(t.push(i.value),!n||t.length!==n);r=!0);}catch(e){o=!0,l=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw l}}return t}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var V=new Date,$="https://cors.louis.workers.dev?apiurl=",X="https://ewa.epfl.ch/room/Default.aspx?room=",K=new Intl.DateTimeFormat("ch-fr",{hour:"2-digit",minute:"2-digit"}).format,Q=new Date(V.getTime()+864e5),Y=36e5,Z=96e4;function ee(e){var n=-60==V.getTimezoneOffset()?"+01:00":"+02:00";return new Date(e+n)}function ne(e){var n=e.name,t=e.loaded,r=z(O({isLoading:!0,freeUntil:null,occupiedUntil:null}),2),o=r[0],l=r[1];!function(e,n){var t=F(U++);(function(e,n){return!e||n.some((function(n,t){return n!==e[t]}))})(t.o,n)&&(t.i=e,t.o=n,H.__H.u.push(t))}((function(){function e(){var r;return r=regeneratorRuntime.mark((function e(){var r,o,i,u,c,a,_,s,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G("".concat($).concat(X).concat(n));case 2:if(r=e.sent,t(),r&&r.length){e.next=6;break}return e.abrupt("return");case 6:if((o=r.split("\n").find((function(e){return e.includes("v.events")})))&&void 0!==o){e.next=9;break}return e.abrupt("return",l({isLoading:!1,error:!0}));case 9:i=o.replace("v.events = ","").replace(/;/g,"").replace(/\\"/g,"").replace(/<br>/g,"").replace(/ISA - /g,"").replace(/\\/g,""),u=JSON.parse(i),c=u.reduce((function(e,n){var t=n.Start,r=n.End,o=n.Text,l=ee(t),i=ee(r);if(e){var u=new Date(e.End);return new Date(u.getUTCMilliseconds()+Z)>l?{Start:t,End:r,Text:o}:e}if(V>l&&V<i)return{Start:t,End:r,Text:o}}),null),a=u.find((function(e){var n=ee(e.Start);return V<n&&n<Q})),_=!c&&a&&ee(a.Start),s=c&&ee(c.End),f=c&&"Réservation ponctuelle"===c.Text||a&&"Réservation ponctuelle"===a.Text,l({isLoading:!1,freeUntil:_,occupiedUntil:s,isReservationPonctuelle:f});case 17:case"end":return e.stop()}}),e)})),(e=function(){var e=this,n=arguments;return new Promise((function(t,o){var l=r.apply(e,n);function i(e){J(l,t,o,i,u,"next",e)}function u(e){J(l,t,o,i,u,"throw",e)}i(void 0)}))}).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var i="loading",u="🔄";return o.isLoading||(i="",u="👍",o.error?(u="🤷‍♀️",i="Could not load information"):o.isReservationPonctuelle?(i="available for revisions",u="👩‍🏫"):o.freeUntil?(i="available until ".concat(K(o.freeUntil)),o.freeUntil-V.getTime()<=Y&&(u="⏳")):o.occupiedUntil&&(i="occupied until ".concat(K(o.occupiedUntil)),u="⛔")),_("tr",null,_("td",null,u),_("td",null,_("strong",null,_("a",{target:"_blank",rel:"noopener noreferrer",href:"".concat(X).concat(n)},n.toUpperCase()))),_("td",{class:"text-right fullwidth"},i))}function te(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var t=[],r=!0,o=!1,l=void 0;try{for(var i,u=e[Symbol.iterator]();!(r=(i=u.next()).done)&&(t.push(i.value),!n||t.length!==n);r=!0);}catch(e){o=!0,l=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw l}}return t}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var re=function(e){return e&&e.__esModule?e.default:e}({in:["inm10","inm11","inm200","inm201","inm202","inm203","inr113","inr219","inf119","inf211","inf213","inf1","inf2","inf3","inj218"],bc:["bc01","bc02","bc03","bc04","bc05","bc010","bc129","bc229","bc329","bc410","bc420"],co:["co020","co021","co023"]}),oe=Object.keys(re);!function(n,t,r){var u,c,a;e.__&&e.__(n,t),c=(u=r===o)?null:r&&r.__k||t.__k,n=_(f,null,[n]),a=[],x(t,(u?t:r||t).__k=n,c||l,l,void 0!==t.ownerSVGElement,r&&!u?[r]:c?null:i.slice.call(t.childNodes),a,r||l,u),S(a,n)}(_((function(){var e=te(O("all"),2),n=e[0],t=e[1],r=te(O(0),2),o=r[0],l=r[1],i=Object.values(re).reduce((function(e,n){return e+n.length}),0),u=function(){l(o+=1)},c=o===i?{opacity:"0"}:{};return _("main",{class:"container"},_("header",{class:"header"},_("h1",{class:"less-margin title text-center"},"rEPFL"),_("h3",{class:"less-margin subtitle text-center"},"find a free room @ EPFL")),_("progress",{class:"rooms-progress",value:o||"0",max:i,style:c},o,"/",i),_("p",{class:"button-list"},["all"].concat(oe).map((function(e){return _(f,{key:e},_("button",{onClick:function(){return t(e)},class:n===e?"filled":""},e.toUpperCase())," ")}))),oe.map((function(e){return _("div",{key:e,class:"all"!==n&&n!==e&&"hidden"},_("h2",{class:"text-center table-h2"},e.toUpperCase()),_("hr",{class:"table-hr"}),_("table",null,_("tbody",null,re[e].map((function(e){return _(ne,{key:e,name:e,loaded:u})})))))})),_("footer",{class:"footer"},_("hr",null),_("p",{class:"less-margin"},"made with ❤️ by ",_("a",{href:"https://louismerl.in"},"Louis Merlin")),_("p",{class:"less-margin"},"need more rooms ?"),_("p",{class:"less-margin"},_("a",{href:"https://github.com/louismerlin/repfl/blob/master/src/rooms.json"},"add them")," or ",_("a",{href:"mailto:louis.merlin@epfl.ch"},"email me")),_("p",{class:"less-margin"},"don't hesitate to ",_("a",{href:"https://github.com/louismerlin/repfl"},"star and/or contribute"))))}),null),document.body)}();